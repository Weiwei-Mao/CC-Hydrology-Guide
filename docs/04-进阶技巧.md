# 04 - 进阶技巧

[English](04-Advanced-Tips.md) | **简体中文**

[← 返回首页](../README-zh.md)

## 目录

1. [专业技能系统（Skills）](#专业技能系统skills)
2. [文献管理与研究辅助](#文献管理与研究辅助)
3. [高效工作流](#高效工作流)
4. [常见问题排查](#常见问题排查)
5. [最佳实践](#最佳实践)

---

## 专业技能系统（Skills）

Claude Code 拥有数百个专业技能（Skills），可以处理特定领域的复杂任务。使用 `/skill` 命令或直接描述需求即可调用。

### 数据分析与可视化

#### csv-data-summarizer（CSV 数据分析）

**功能**：快速分析 CSV 文件，生成统计摘要和可视化

```
使用 csv-data-summarizer 技能分析 rainfall.csv
```

或者：
```
分析 rainfall.csv 文件，生成统计摘要和图表
```

**Claude 会自动**：
- 计算基本统计量（均值、标准差、分位数等）
- 检测异常值
- 生成分布图、时间序列图等

#### scientific-visualization（科研可视化）

**功能**：创建符合学术出版标准的图表

```
创建一个科研级的水文过程线图：
- 使用 publication-quality 样式
- 适合论文排版（考虑字体大小、线宽等）
- 保存为矢量图格式
```

#### statistical-analysis（统计分析）

**功能**：选择合适的统计方法并执行分析

```
我想分析两组水质数据是否有显著差异
```

**Claude 会**：
- 根据数据特征选择合适的检验方法（t检验、Mann-Whitney U检验等）
- 执行分析
- 解释结果并生成报告

### 学术研究辅助

#### literature-review（文献综述）

**功能**：系统化的文献检索和管理

```
帮我搜索关于"城市洪水风险"的最新文献
```

```
创建一个关于海绵城市效应的文献综述大纲
```

#### citation-management（文献管理）

**功能**：管理参考文献和引用

```
整理这些文献的引用格式为 APA 格式
```

```
帮我生成一份参考文献列表，格式为 GB/T 7714
```

#### scientific-writing（科研写作）

**功能**：学术论文写作辅助

```
帮我润色这段论文摘要，使其更加学术化
```

```
根据我的研究结果，写一个讨论部分的草稿
```

### 专业计算工具

#### statsmodels（统计模型）

**功能**：高级统计建模

```
使用 statsmodels 建立一个 ARIMA 时间序列模型
```

#### pymc（贝叶斯分析）

**功能**：贝叶斯统计和 MCMC 采样

```
使用贝叶斯方法估计洪水频率曲线的不确定性
```

---

## 文献管理与研究辅助

### 文献搜索

#### 使用 citation-management 技能

```
搜索关于"降水变化趋势"的文献，限制在最近5年
```

```
在 PubMed 中搜索"water quality"相关的论文
```

### 引用格式转换

```
将这些引用从 APA 格式转换为 Chicago 格式
```

然后粘贴你的引用列表。

### 参考文献管理

```
创建一个 BibTeX 文件，包含以下文献信息：
- 作者：Zhang, San
- 标题：Hydrological response to climate change
- 期刊：Journal of Hydrology
- 年份：2023
- 卷号：600
- 页码：123-145
```

### 论文写作辅助

#### 结构优化

```
帮我优化论文的结构，确保逻辑连贯
```

然后提供你的论文大纲或内容。

#### 语言润色

```
润色这段英文摘要，使其更加流畅和专业
```

```
检查这段讨论部分是否有语法问题
```

#### 图表说明生成

```
根据这张图的特点，生成一个详细的图片说明（Figure Caption）
```

---

## 高效工作流

### 1. 创建项目模板

为你的研究类型创建可复用的模板：

```
创建一个水文数据分析项目模板，包含：
1. data/ 文件夹用于存放原始数据
2. scripts/ 文件夹用于存放分析脚本
3. figures/ 文件夹用于存放图表
4. results/ 文件夹用于存放结果文件
5. main.py 作为主分析脚本
6. README.md 记录项目说明
```

### 2. 批量处理工作流

```
创建一个自动化工作流：
1. 扫描 data/ 文件夹中的所有 CSV 文件
2. 对每个文件执行相同的数据处理步骤
3. 生成汇总报告
4. 保存所有图表到 figures/ 文件夹
```

### 3. 增量式开发

与 Claude 协作时，采用增量式方法更高效：

**第一步**：
```
创建一个读取数据的函数
```

**第二步**（审查代码后）：
```
添加数据清洗的步骤到这个函数
```

**第三步**（继续完善）：
```
添加异常值检测功能
```

### 4. 版本控制集成

```
帮我初始化 Git 仓库
```

```
生成一条 Git 提交信息，总结我刚才的修改
```

```
创建一个 .gitignore 文件，排除 Python 相关文件
```

### 5. 文档自动生成

```
根据这个 Python 脚本，生成一个使用说明文档
```

```
为所有 Python 函数生成详细的文档字符串
```

---

## 常见问题排查

### 问题1：代码报错后如何处理

**不要**：只贴错误代码

**应该**：
```
我的代码报错了，错误信息如下：
[粘贴完整错误信息]

这段代码是要做：[描述你的目标]

代码内容是：
[粘贴相关代码]
```

### 问题2：性能问题

```
这个脚本处理 100MB 的数据需要很长时间，请帮我优化
```

```
如何加快这个 pandas 操作的速度？
```

Claude 可以建议：
- 使用向量化操作替代循环
- 使用更高效的数据类型
- 并行处理
- 使用 Dask 处理大数据

### 问题3：内存不足

```
处理大文件时内存不足，有什么解决方案？
```

Claude 会建议：
- 分块读取和处理
- 使用生成器
- 使用 Dask 或 Vaex
- 只保留需要的列

### 问题4：图表不符合要求

```
这张图不符合期刊要求，需要：
- 图例在图外
- 无衬线字体
- 线宽至少 1.5pt
- 图例字号 9pt
- 保存为 EPS 格式
```

---

## 最佳实践

### 1. 清晰的沟通

**好的提问**：
```
我有一个水文站的日流量数据（2020-2023），想分析：
1. 年际变化趋势
2. 季节分布特征
3. 极值频率

数据格式：Date, Flow(m³/s)
请帮我创建分析脚本
```

**不够好的提问**：
```
分析这个数据
```

### 2. 提供上下文

告诉 Claude 更多背景信息：

```
这是长江某支流的水文站数据，
研究目标是分析气候变化对径流的影响。
数据已经经过质量控制，没有异常值。
```

### 3. 分步骤验证

对于复杂任务，要求分步骤执行：

```
请分三步完成这个任务：
第一步：先写读取数据的代码，我确认后再继续
第二步：添加数据处理代码
第三步：添加可视化和输出
```

### 4. 代码复用

```
我之前写过一个读取水文数据的函数，在 process_data.py 中
请基于这个函数，添加新的分析功能
```

### 5. 明确输出格式

```
请输出：
1. 完整的 Python 脚本（可独立运行）
2. Markdown 格式的分析报告
3. 所有图表的 PNG 和 PDF 版本
```

---

## 高级技巧

### 1. 使用 CLAUDE.md 定制行为

在项目目录中创建 `CLAUDE.md` 文件，可以定制 Claude 的行为：

```markdown
# 项目说明

这是一个水文数据分析项目。

## 编码规范
- 使用中文注释
- 变量名使用英文
- 函数必须有文档字符串

## 数据规范
- 所有数据文件放在 data/ 目录
- 处理后的数据保存在 results/ 目录
- 图表保存在 figures/ 目录

## 常用库
- pandas：数据处理
- numpy：数值计算
- matplotlib：基础绘图
- scipy：统计分析
```

### 2. 创建函数库

```
创建一个水文分析工具库 hydro_utils.py，包含：
1. read_hydro_data() - 读取水文数据
2. calc_flood_stats() - 计算洪水统计量
3. plot_hydrograph() - 绘制水文过程线
4. detect_flood_events() - 检测洪水事件
```

### 3. 自动化报告生成

```
创建一个脚本，自动生成包含以下内容的研究报告：
1. 数据概况
2. 统计摘要表
3. 所有图表
4. 分析结论
5. Markdown 格式，方便转换为 PDF
```

### 4. 数据质量控制流程

```
创建一个数据质量控制流程，包括：
1. 缺失值检查
2. 异常值检测（3σ原则）
3. 物理一致性检查（如水位与流量关系）
4. 生成质量控制报告
```

### 5. 批量场景分析

```
针对多个气候情景，批量分析水文响应：
- 读取多个情景的输入数据
- 运行水文模型
- 对比输出结果
- 生成对比图表和报告
```

---

## 实用命令速查

| 需求 | 示例指令 |
|------|----------|
| 读取文件 | 读取 data.csv，告诉我有哪些列 |
| 创建脚本 | 创建一个 Python 脚本分析水文数据 |
| 调试代码 | 这段代码报错：[错误信息]，帮我修复 |
| 优化性能 | 优化这段代码，让它运行更快 |
| 绘制图表 | 画出流量过程线，包含标题和图例 |
| 统计分析 | 对这组数据进行 t 检验 |
| 文献搜索 | 搜索关于洪水风险的最新文献 |
| 格式转换 | 将这个 R 代码转换为 Python |
| 文档生成 | 为这个函数添加详细的文档字符串 |
| 代码解释 | 解释这段代码在做什么 |

---

## 总结

Claude Code 是一个强大的研究助手，掌握这些进阶技巧后，你可以：

1. **提升效率**：通过技能系统快速完成专业任务
2. **保证质量**：利用 AI 进行代码审查和优化
3. **减少错误**：让 AI 帮助调试和验证
4. **加速学习**：通过代码解释快速理解新方法

### 持续学习

- **多尝试**：尝试不同的表达方式，找到最有效的提问方式
- **多验证**：始终验证 AI 生成的代码结果
- **多积累**：积累常用的代码模板和工作流程
- **多交流**：与同事分享使用经验

祝你研究顺利！

---

[← 上一章：03-水文场景案例](03-水文场景案例.md) | [返回首页](../README.md)

1. **提升效率**：通过技能系统快速完成专业任务
2. **保证质量**：利用 AI 进行代码审查和优化
3. **减少错误**：让 AI 帮助调试和验证
4. **加速学习**：通过代码解释快速理解新方法

### 持续学习

- **多尝试**：尝试不同的表达方式，找到最有效的提问方式
- **多验证**：始终验证 AI 生成的代码结果
- **多积累**：积累常用的代码模板和工作流程
- **多交流**：与同事分享使用经验

祝你研究顺利！
